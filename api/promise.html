
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Promise · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="resource.html" />
    
    
    <link rel="prev" href="http.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    [起步教程]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../get-started/1-hello-world.html">
            
                <a href="../get-started/1-hello-world.html">
            
                    
                    1. Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../get-started/2-service.html">
            
                <a href="../get-started/2-service.html">
            
                    
                    2. 编写 Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../get-started/3-action.html">
            
                <a href="../get-started/3-action.html">
            
                    
                    3. Action与路由
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../advanced/readme.md">
            
                <span>
            
                    
                    高级主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../advanced/debug.html">
            
                <a href="../advanced/debug.html">
            
                    
                    框架 Debug
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../advanced/life-cycle.html">
            
                <a href="../advanced/life-cycle.html">
            
                    
                    生命周期概述
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="readme.md">
            
                <span>
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="action.html">
            
                <a href="action.html">
            
                    
                    Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="cache.html">
            
                <a href="cache.html">
            
                    
                    Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="cache-namespace.html">
            
                <a href="cache-namespace.html">
            
                    
                    Cache Namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="emitter.html">
            
                <a href="emitter.html">
            
                    
                    Emitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="http.html">
            
                <a href="http.html">
            
                    
                    Http
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.6" data-path="promise.html">
            
                <a href="promise.html">
            
                    
                    Promise
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="resource.html">
            
                <a href="resource.html">
            
                    
                    Resource
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="router.html">
            
                <a href="router.html">
            
                    
                    Router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="service.html">
            
                <a href="service.html">
            
                    
                    Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="underscore.html">
            
                <a href="underscore.html">
            
                    
                    Underscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="url.html">
            
                <a href="url.html">
            
                    
                    Url
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="view.html">
            
                <a href="view.html">
            
                    
                    View
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <a target="_blank" href="https://github.com/searchfe/superframe/releases">
            
                    
                    版本
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Promise</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p><a name="module_Promise"></a></p>
<h2 id="promise">Promise</h2>
<p>promise.js A Promise Implementation</p>
<p>This implementation conforms to Promise/A+ spec. see: <a href="https://promisesaplus.com/" target="_blank">https://promisesaplus.com/</a></p>
<p><strong>Author</strong>: harttle <a href="mailto:yangjun14@baidu.com" target="_blank">yangjun14@baidu.com</a>  </p>
<ul>
<li><a href="#module_Promise">Promise</a><ul>
<li><a href="#exp_module_Promise--Promise">Promise</a> &#x23CF;<ul>
<li><a href="#new_module_Promise--Promise_new">new Promise(cb)</a></li>
<li><em>instance</em><ul>
<li><a href="#module_Promise--Promise+_doResolve">._doResolve(fn)</a></li>
<li><a href="#module_Promise--Promise+_done">._done(onFulfilled, onRejected)</a> &#x21D2; <code>undefined</code></li>
<li><a href="#module_Promise--Promise+then">.then(onFulfilled, onRejected)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise+catch">.catch(cb)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise+finally">.finally(cb)</a> &#x21D2; <code>Promise</code></li>
</ul>
</li>
<li><em>static</em><ul>
<li><a href="#module_Promise--Promise.resolve">.resolve(obj)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise.reject">.reject(err)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise.all">.all(promises)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise.fromCallback">.fromCallback(resolver)</a> &#x21D2; <code>Promise</code></li>
<li><a href="#module_Promise--Promise.mapSeries">.mapSeries(iterable, iteratee)</a> &#x21D2; <code>Promise</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="exp_module_Promise--Promise"></a></p>
<h3 id="promise-&#x23CF;">Promise &#x23CF;</h3>
<p><strong>Kind</strong>: Exported class<br><a name="new_module_Promise--Promise_new"></a></p>
<h4 id="new-promisecb">new Promise(cb)</h4>
<p>Create a new promise.
The passed in function will receive functions resolve and reject as its arguments
which can be called to seal the fate of the created promise.</p>
<p>The returned promise will be resolved when resolve is called, and rejected when reject called or any exception occurred.
If you pass a promise object to the resolve function, the created promise will follow the state of that promise.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cb</td>
<td><code>function</code></td>
<td>The resolver callback.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>)</span>{
    <span class="hljs-literal">true</span> ? resolve(<span class="hljs-string">&apos;foo&apos;</span>) : reject(<span class="hljs-string">&apos;bar&apos;</span>);
});
</code></pre>
<p><a name="module_Promise--Promise+_doResolve"></a></p>
<h4 id="promisedoresolvefn">promise._doResolve(fn)</h4>
<p>Resolve the un-trusted promise definition function: fn
which has exactly the same signature as the .then function</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fn</td>
<td><code>function</code></td>
<td>the reslver</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise+_done"></a></p>
<h4 id="promisedoneonfulfilled-onrejected-&#x21D2;-undefined">promise._done(onFulfilled, onRejected) &#x21D2; <code>undefined</code></h4>
<p>Register a callback on fulfilled or rejected.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>onFulfilled</td>
<td><code>function</code></td>
<td>the callback on fulfilled</td>
</tr>
<tr>
<td>onRejected</td>
<td><code>function</code></td>
<td>the callback on rejected</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise+then"></a></p>
<h4 id="promisethenonfulfilled-onrejected-&#x21D2;-promise">promise.then(onFulfilled, onRejected) &#x21D2; <code>Promise</code></h4>
<p>The Promise/A+ .then, register a callback on resolve. See: <a href="https://promisesaplus.com/" target="_blank">https://promisesaplus.com/</a></p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>onFulfilled</td>
<td><code>function</code></td>
<td>The fulfilled callback.</td>
</tr>
<tr>
<td>onRejected</td>
<td><code>function</code></td>
<td>The rejected callback.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise+catch"></a></p>
<h4 id="promisecatchcb-&#x21D2;-promise">promise.catch(cb) &#x21D2; <code>Promise</code></h4>
<p>The Promise/A+ .catch, retister a callback on reject. See: <a href="https://promisesaplus.com/" target="_blank">https://promisesaplus.com/</a></p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cb</td>
<td><code>function</code></td>
<td>The callback to be registered.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise+finally"></a></p>
<h4 id="promisefinallycb-&#x21D2;-promise">promise.finally(cb) &#x21D2; <code>Promise</code></h4>
<p>Register a callback on either resolve or reject. See: <a href="https://promisesaplus.com/" target="_blank">https://promisesaplus.com/</a></p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cb</td>
<td><code>function</code></td>
<td>The callback to be registered.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise.resolve"></a></p>
<h4 id="promiseresolveobj-&#x21D2;-promise">Promise.resolve(obj) &#x21D2; <code>Promise</code></h4>
<p>Create a promise that is resolved with the given value.
If value is already a thenable, it is returned as is.
If value is not a thenable, a fulfilled Promise is returned with value as its fulfillment value.</p>
<p><strong>Kind</strong>: static method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable which resolves the given <code>obj</code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>obj</td>
<td><code>Promise</code> | <code>any</code></td>
<td>The value to be resolved.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise.reject"></a></p>
<h4 id="promiserejecterr-&#x21D2;-promise">Promise.reject(err) &#x21D2; <code>Promise</code></h4>
<p>Create a promise that is rejected with the given error.</p>
<p><strong>Kind</strong>: static method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable which is rejected with the given <code>error</code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>err</td>
<td><code>Error</code></td>
<td>The error to reject with.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise.all"></a></p>
<h4 id="promiseallpromises-&#x21D2;-promise">Promise.all(promises) &#x21D2; <code>Promise</code></h4>
<p>This method is useful for when you want to wait for more than one promise to complete.</p>
<p>Given an Iterable(arrays are Iterable), or a promise of an Iterable,
which produces promises (or a mix of promises and values),
iterate over all the values in the Iterable into an array and return a promise that is fulfilled when
all the items in the array are fulfilled.
The promise&apos;s fulfillment value is an array with fulfillment values at respective positions to the original array.
If any promise in the array rejects, the returned promise is rejected with the rejection reason.</p>
<p><strong>Kind</strong>: static method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - A thenable.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>promises</td>
<td><code>Iterable.&lt;any&gt;</code> | <code>Promise.&lt;Iterable.&lt;any&gt;&gt;</code></td>
<td>The promises to wait for.</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise.fromCallback"></a></p>
<h4 id="promisefromcallbackresolver-&#x21D2;-promise">Promise.fromCallback(resolver) &#x21D2; <code>Promise</code></h4>
<p>Promisify callback</p>
<p><strong>Kind</strong>: static method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - that is resolved by a node style callback function. This is the most fitting way to do on the fly promisification when libraries don&apos;t expose classes for automatic promisification.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>resolver</td>
<td><code>function</code></td>
<td>The callback to promisify</td>
</tr>
</tbody>
</table>
<p><a name="module_Promise--Promise.mapSeries"></a></p>
<h4 id="promisemapseriesiterable-iteratee-&#x21D2;-promise">Promise.mapSeries(iterable, iteratee) &#x21D2; <code>Promise</code></h4>
<p>Call functions in serial until someone rejected.</p>
<p><strong>Kind</strong>: static method of <a href="#exp_module_Promise--Promise"><code>Promise</code></a><br><strong>Returns</strong>: <code>Promise</code> - the promise resolves when the last is completed  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>iterable</td>
<td><code>Array</code></td>
<td>the array to iterate with.</td>
</tr>
<tr>
<td>iteratee</td>
<td><code>Array</code></td>
<td>returns a new promise. The iteratee is invoked with three arguments: (value, index, iterable).</td>
</tr>
</tbody>
</table>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="http.html" class="navigation navigation-prev " aria-label="Previous page: Http">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="resource.html" class="navigation navigation-next " aria-label="Next page: Resource">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Promise","level":"1.4.6","depth":2,"next":{"title":"Resource","level":"1.4.7","depth":2,"path":"api/resource.md","ref":"api/resource.md","articles":[]},"previous":{"title":"Http","level":"1.4.5","depth":2,"path":"api/http.md","ref":"api/http.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"api/promise.md","mtime":"2017-08-04T03:18:58.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-08-04T03:19:00.477Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

